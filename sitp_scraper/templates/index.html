{% extends 'base.html' %}

{% block content %}
 <div id="map"></div>
{% endblock %}

{% block javascript %}
  <script type="text/javascript">
    L.mapbox.accessToken = 'pk.eyJ1IjoidmVybzRrYSIsImEiOiJjYWNlMWY0Zjk0MGJhNWRmNDIzNmVjNjc0NDRhMjllOCJ9.fRmHavGBvl6wWemwMZBbfA';
    var map = L.mapbox.map('map', 'mapbox.streets')
        .setView([38, -102.0], 2);

    var featureLayer = L.mapbox.featureLayer()
        .loadURL("{% url 'get_routes' %}").addTo(map);

    featureLayer.on('ready', function() {
        // featureLayer.getBounds() returns the corners of the furthest-out markers,
        // and map.fitBounds() makes sure that the map contains these.
        map.fitBounds(featureLayer.getBounds());
    });

  </script>
{% endblock %}
